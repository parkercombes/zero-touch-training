<?xml version="1.0" encoding="UTF-8"?>
<TestScript xmlns="http://www.tricentis.com/tosca/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Metadata>
    <TestScriptId>TS_ME51N_CREATE_PR_002</TestScriptId>
    <Name>Create Purchase Requisition in SAP Fiori - GlobalMart Southeast Distribution Center</Name>
    <Description>Test script for creating a Purchase Requisition (ME51N) at GlobalMart Southeast Distribution Center (SE-DC) in Atlanta, GA. Validates SE DC-specific constraints: lot/batch tracking requirement for perishables, purchasing group restriction (R-SE/R-NAT), refrigerated storage zone assignment, and 2-tier approval for amounts under $25K.</Description>
    <Version>1.0</Version>
    <CreatedDate>2026-01-10T09:15:00Z</CreatedDate>
    <LastExecutedDate>2026-02-11T11:45:30Z</LastExecutedDate>
    <LastModifiedDate>2026-02-11T11:45:30Z</LastModifiedDate>
    <ExecutionStatus>PASSED</ExecutionStatus>
    <ExecutionCount>52</ExecutionCount>
    <PassCount>52</PassCount>
    <FailCount>0</FailCount>
    <AverageExecutionTime>163</AverageExecutionTime>
  </Metadata>

  <TestEnvironment>
    <SystemName>SAP S/4HANA 2023</SystemName>
    <SiteCode>SE-DC</SiteCode>
    <SiteName>GlobalMart Southeast Distribution Center</SiteName>
    <URL>https://sap.globalmart.com/fiori</URL>
    <Client>100</Client>
    <Language>EN</Language>
  </TestEnvironment>

  <TestSteps>
    <Step>
      <StepId>STEP_001</StepId>
      <StepNumber>1</StepNumber>
      <Description>Open SAP Fiori Launchpad</Description>
      <Action>
        <Type>NAVIGATE</Type>
        <TargetURL>https://sap.globalmart.com/fiori</TargetURL>
      </Action>
      <ExpectedResult>SAP Fiori Launchpad homepage displayed with user authenticated as SE_DC_BUYER</ExpectedResult>
      <ScreenshotReference>screenshot_001_fiori_launchpad.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_002</StepId>
      <StepNumber>2</StepNumber>
      <Description>Verify Fiori Launchpad loads successfully</Description>
      <Action>
        <Type>VERIFY</Type>
        <Element>
          <Identifier>xpath://div[@class='sapMFlexBox' and contains(text(), 'Fiori Launchpad')]</Identifier>
          <Description>Fiori Launchpad container</Description>
        </Element>
      </Action>
      <ExpectedResult>Fiori Launchpad title visible and fully loaded</ExpectedResult>
      <ScreenshotReference>screenshot_002_launchpad_loaded.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_003</StepId>
      <StepNumber>3</StepNumber>
      <Description>Search for "Create Purchase Requisition" app</Description>
      <Action>
        <Type>INPUT</Type>
        <Element>
          <Identifier>id://searchInput</Identifier>
          <Description>Fiori Launchpad search box</Description>
        </Element>
        <Value>Create Purchase Requisition</Value>
      </Action>
      <ExpectedResult>Search results show "Create Purchase Requisition" (ME51N) app tile</ExpectedResult>
      <ScreenshotReference>screenshot_003_search_app.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_004</StepId>
      <StepNumber>4</StepNumber>
      <Description>Click on Create Purchase Requisition app tile</Description>
      <Action>
        <Type>CLICK</Type>
        <Element>
          <Identifier>xpath://div[@class='sapMTile' and contains(.//span[@class='sapMTileContent'], 'Create Purchase Requisition')]</Identifier>
          <Description>ME51N app tile</Description>
        </Element>
      </Action>
      <ExpectedResult>ME51N transaction opened in Fiori interface</ExpectedResult>
      <ScreenshotReference>screenshot_004_me51n_opened.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_005</StepId>
      <StepNumber>5</StepNumber>
      <Description>Verify ME51N form loads</Description>
      <Action>
        <Type>VERIFY</Type>
        <Element>
          <Identifier>xpath://form[@id='PR_CREATE_FORM']</Identifier>
          <Description>Purchase Requisition creation form</Description>
        </Element>
      </Action>
      <ExpectedResult>Purchase Requisition creation form displayed with empty fields ready for input</ExpectedResult>
      <ScreenshotReference>screenshot_005_pr_form_ready.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_006</StepId>
      <StepNumber>6</StepNumber>
      <Description>Select Purchase Requisition Type: NB (Normally)</Description>
      <Action>
        <Type>SELECT</Type>
        <Element>
          <Identifier>id://PRType</Identifier>
          <Description>PR Type dropdown</Description>
        </Element>
        <Value>NB</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALUE_EQUALS</Type>
        <FieldReference>PRType</FieldReference>
        <ExpectedValue>NB</ExpectedValue>
      </Assertion>
      <ExpectedResult>PR Type field set to "NB - Normally"</ExpectedResult>
      <ScreenshotReference>screenshot_006_pr_type_nb.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_007</StepId>
      <StepNumber>7</StepNumber>
      <Description>Select Purchasing Group: R-SE (Regional Southeast - required constraint)</Description>
      <Action>
        <Type>SELECT</Type>
        <Element>
          <Identifier>id://PurchasingGroup</Identifier>
          <Description>Purchasing Group dropdown (SE DC constraint: R-SE or R-NAT only)</Description>
        </Element>
        <Value>R-SE</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALUE_EQUALS</Type>
        <FieldReference>PurchasingGroup</FieldReference>
        <ExpectedValue>R-SE</ExpectedValue>
      </Assertion>
      <Assertion>
        <Type>ALLOWED_VALUES</Type>
        <FieldReference>PurchasingGroup</FieldReference>
        <AllowedValues>R-SE,R-NAT</AllowedValues>
        <Reason>SE DC procurement restricted to Regional Southeast (R-SE) or National (R-NAT) purchasing groups per site policy</Reason>
      </Assertion>
      <ExpectedResult>Purchasing Group set to "R-SE - Regional Southeast"</ExpectedResult>
      <ScreenshotReference>screenshot_007_purchasing_group_rse.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_008</StepId>
      <StepNumber>8</StepNumber>
      <Description>Select Purchasing Organization: 2000 (GlobalMart Procurement - Southeast Region)</Description>
      <Action>
        <Type>SELECT</Type>
        <Element>
          <Identifier>id://PurchasingOrganization</Identifier>
          <Description>Purchasing Organization dropdown</Description>
        </Element>
        <Value>2000</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALUE_EQUALS</Type>
        <FieldReference>PurchasingOrganization</FieldReference>
        <ExpectedValue>2000</ExpectedValue>
      </Assertion>
      <ExpectedResult>Purchasing Organization set to "2000 - GlobalMart Procurement - Southeast Region"</ExpectedResult>
      <ScreenshotReference>screenshot_008_purchasing_org_2000.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_009</StepId>
      <StepNumber>9</StepNumber>
      <Description>Enter Material Number</Description>
      <Action>
        <Type>INPUT</Type>
        <Element>
          <Identifier>id://MaterialNumber_Item1</Identifier>
          <Description>Material Number field for line item 1</Description>
        </Element>
        <Value>SKU-DRY-78432</Value>
      </Action>
      <ExpectedResult>Material number "SKU-DRY-78432" entered</ExpectedResult>
      <ScreenshotReference>screenshot_009_material_number.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_010</StepId>
      <StepNumber>10</StepNumber>
      <Description>Verify Material Description auto-populates</Description>
      <Action>
        <Type>VERIFY</Type>
        <Element>
          <Identifier>id://MaterialDescription_Item1</Identifier>
          <Description>Material Description field</Description>
        </Element>
      </Action>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>MaterialDescription_Item1</FieldReference>
      </Assertion>
      <Assertion>
        <Type>FIELD_CONTAINS</Type>
        <FieldReference>MaterialDescription_Item1</FieldReference>
        <ExpectedValue>Organic Whole Milk</ExpectedValue>
        <Reason>Material lookup returned correct description for material SKU-DRY-78432</Reason>
      </Assertion>
      <ExpectedResult>Material description "Organic Whole Milk 1 Gal - Store Brand" auto-populated from material master</ExpectedResult>
      <ScreenshotReference>screenshot_010_material_desc_auto.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_011</StepId>
      <StepNumber>11</StepNumber>
      <Description>Enter Quantity: 500 cases</Description>
      <Action>
        <Type>INPUT</Type>
        <Element>
          <Identifier>id://Quantity_Item1</Identifier>
          <Description>Quantity field</Description>
        </Element>
        <Value>500</Value>
      </Action>
      <ExpectedResult>Quantity set to 500</ExpectedResult>
      <ScreenshotReference>screenshot_011_quantity_500.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_012</StepId>
      <StepNumber>12</StepNumber>
      <Description>Select Unit of Measure: CS (Case)</Description>
      <Action>
        <Type>SELECT</Type>
        <Element>
          <Identifier>id://UnitOfMeasure_Item1</Identifier>
          <Description>Unit of Measure dropdown</Description>
        </Element>
        <Value>CS</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALUE_EQUALS</Type>
        <FieldReference>UnitOfMeasure_Item1</FieldReference>
        <ExpectedValue>CS</ExpectedValue>
      </Assertion>
      <ExpectedResult>Unit of Measure set to "CS - Case"</ExpectedResult>
      <ScreenshotReference>screenshot_012_unit_cs.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_013</StepId>
      <StepNumber>13</StepNumber>
      <Description>Select Delivery Date: 7 days from today (perishable lead time constraint)</Description>
      <Action>
        <Type>INPUT</Type>
        <Element>
          <Identifier>id://DeliveryDate_Item1</Identifier>
          <Description>Requested Delivery Date field</Description>
        </Element>
        <Value>2026-02-18</Value>
      </Action>
      <ExpectedResult>Delivery date set to 7 days in future to comply with perishable lead time requirement</ExpectedResult>
      <ScreenshotReference>screenshot_013_delivery_date.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_014</StepId>
      <StepNumber>14</StepNumber>
      <Description>Enter Plant: SE-DC (Southeast Distribution Center)</Description>
      <Action>
        <Type>SELECT</Type>
        <Element>
          <Identifier>id://Plant_Item1</Identifier>
          <Description>Plant dropdown</Description>
        </Element>
        <Value>SE-DC</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALUE_EQUALS</Type>
        <FieldReference>Plant_Item1</FieldReference>
        <ExpectedValue>SE-DC</ExpectedValue>
      </Assertion>
      <ExpectedResult>Plant set to "SE-DC - Southeast Distribution Center (Atlanta, GA)"</ExpectedResult>
      <ScreenshotReference>screenshot_014_plant_sedc.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_015</StepId>
      <StepNumber>15</StepNumber>
      <Description>Select Storage Location: Zone-R (Refrigerated Zone)</Description>
      <Action>
        <Type>SELECT</Type>
        <Element>
          <Identifier>id://StorageLocation_Item1</Identifier>
          <Description>Storage Location dropdown for perishables</Description>
        </Element>
        <Value>Zone-R</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALUE_EQUALS</Type>
        <FieldReference>StorageLocation_Item1</FieldReference>
        <ExpectedValue>Zone-R</ExpectedValue>
      </Assertion>
      <ExpectedResult>Storage Location set to "Zone-R - Refrigerated Zone (38°F)"</ExpectedResult>
      <ScreenshotReference>screenshot_015_storage_location_zoner.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_016</StepId>
      <StepNumber>16</StepNumber>
      <Description>Enter Account Assignment - Cost Center: CC-SEDC-4200 (SE DC Operations - Perishables)</Description>
      <Action>
        <Type>INPUT</Type>
        <Element>
          <Identifier>id://CostCenter_Item1</Identifier>
          <Description>Cost Center field for account assignment</Description>
        </Element>
        <Value>CC-SEDC-4200</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALIDATION</Type>
        <FieldReference>CostCenter_Item1</FieldReference>
        <ValidationType>COST_CENTER_EXISTS</ValidationType>
      </Assertion>
      <ExpectedResult>Cost Center "CC-SEDC-4200 - SE DC Operations - Perishables" assigned to line item</ExpectedResult>
      <ScreenshotReference>screenshot_016_cost_center_ccsedc.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_017</StepId>
      <StepNumber>17</StepNumber>
      <Description>Enter Lot/Batch Number: LOT-2026-0215-MK (SE DC mandatory field for perishables)</Description>
      <Action>
        <Type>INPUT</Type>
        <Element>
          <Identifier>id://LotBatchNumber_Item1</Identifier>
          <Description>Lot/Batch Number field (SE DC mandatory requirement for perishables). Technical name: CHARG</Description>
        </Element>
        <Value>LOT-2026-0215-MK</Value>
      </Action>
      <Assertion>
        <Type>FIELD_REQUIRED</Type>
        <FieldReference>LotBatchNumber_Item1</FieldReference>
        <Reason>Lot/Batch Number is mandatory at SE DC for all perishable category items. This is a site-specific override to enterprise default (optional). Required for food safety traceability per GlobalMart cold chain policy.</Reason>
      </Assertion>
      <Assertion>
        <Type>FIELD_VALIDATION</Type>
        <FieldReference>LotBatchNumber_Item1</FieldReference>
        <ValidationType>LOT_FORMAT_VALID</ValidationType>
        <ExpectedValue>LOT-2026-0215-MK</ExpectedValue>
      </Assertion>
      <ExpectedResult>Lot/Batch Number "LOT-2026-0215-MK" entered and validated for traceability</ExpectedResult>
      <ScreenshotReference>screenshot_017_lot_batch_number.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_018</StepId>
      <StepNumber>18</StepNumber>
      <Description>Enter GL Account: 510200 (Inventory - Refrigerated Goods)</Description>
      <Action>
        <Type>INPUT</Type>
        <Element>
          <Identifier>id://GLAccount_Item1</Identifier>
          <Description>GL Account field for accounting assignment</Description>
        </Element>
        <Value>510200</Value>
      </Action>
      <Assertion>
        <Type>FIELD_VALIDATION</Type>
        <FieldReference>GLAccount_Item1</FieldReference>
        <ValidationType>GL_ACCOUNT_EXISTS</ValidationType>
      </Assertion>
      <ExpectedResult>GL Account "510200 - Inventory - Refrigerated Goods" assigned</ExpectedResult>
      <ScreenshotReference>screenshot_018_gl_account.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_019</StepId>
      <StepNumber>19</StepNumber>
      <Description>Verify all mandatory fields completed</Description>
      <Action>
        <Type>VERIFY</Type>
        <Element>
          <Identifier>xpath://form[@id='PR_CREATE_FORM']</Identifier>
          <Description>Complete PR creation form</Description>
        </Element>
      </Action>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>PRType</FieldReference>
      </Assertion>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>PurchasingGroup</FieldReference>
      </Assertion>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>PurchasingOrganization</FieldReference>
      </Assertion>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>MaterialNumber_Item1</FieldReference>
      </Assertion>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>Quantity_Item1</FieldReference>
      </Assertion>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>LotBatchNumber_Item1</FieldReference>
      </Assertion>
      <ExpectedResult>All mandatory fields completed successfully</ExpectedResult>
      <ScreenshotReference>screenshot_019_all_fields_complete.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_020</StepId>
      <StepNumber>20</StepNumber>
      <Description>Calculate PR total amount for approval routing</Description>
      <Action>
        <Type>CALCULATE</Type>
        <Formula>Quantity * EstimatedPrice</Formula>
        <Parameters>
          <Quantity>500</Quantity>
          <EstimatedPrice>48.00</EstimatedPrice>
        </Parameters>
      </Action>
      <ExpectedResult>PR total estimated at $24,000.00 (under SE DC $25K threshold for 2-tier approval)</ExpectedResult>
      <ScreenshotReference>screenshot_020_pr_total_calculated.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_021</StepId>
      <StepNumber>21</StepNumber>
      <Description>Save Purchase Requisition</Description>
      <Action>
        <Type>CLICK</Type>
        <Element>
          <Identifier>id://SaveButton</Identifier>
          <Description>Save button on PR creation form</Description>
        </Element>
      </Action>
      <ExpectedResult>PR saved successfully, system displays PR number confirmation</ExpectedResult>
      <ScreenshotReference>screenshot_021_pr_saved.png</ScreenshotReference>
    </Step>

    <Step>
      <StepId>STEP_022</StepId>
      <StepNumber>22</StepNumber>
      <Description>Verify PR Number generated and initial approval status</Description>
      <Action>
        <Type>VERIFY</Type>
        <Element>
          <Identifier>id://PRNumberConfirmation</Identifier>
          <Description>PR number confirmation message and approval status</Description>
        </Element>
      </Action>
      <Assertion>
        <Type>FIELD_MATCHES_PATTERN</Type>
        <FieldReference>PRNumberConfirmation</FieldReference>
        <Pattern>PR\d{10}</Pattern>
        <ExpectedExample>PR0000654321</ExpectedExample>
      </Assertion>
      <Assertion>
        <Type>FIELD_NOT_EMPTY</Type>
        <FieldReference>PRNumberConfirmation</FieldReference>
      </Assertion>
      <Assertion>
        <Type>FIELD_VALUE_EQUALS</Type>
        <FieldReference>PRStatus</FieldReference>
        <ExpectedValue>Waiting for Approval</ExpectedValue>
      </Assertion>
      <ExpectedResult>PR number "PR0000654321" generated. PR Status correctly set to "Waiting for Approval" pending Category Manager review (first of 2-tier approval chain)</ExpectedResult>
      <ScreenshotReference>screenshot_022_pr_confirmation_status.png</ScreenshotReference>
    </Step>
  </TestSteps>

  <TestData>
    <DataSet>
      <DataRow>
        <FieldName>PRType</FieldName>
        <FieldValue>NB</FieldValue>
        <FieldDescription>Purchase Requisition Type - Normal requisition</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>PurchasingGroup</FieldName>
        <FieldValue>R-SE</FieldValue>
        <FieldDescription>Regional Southeast Procurement Group (SE DC approved supplier program)</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>PurchasingOrganization</FieldName>
        <FieldValue>2000</FieldValue>
        <FieldDescription>GlobalMart Procurement - Southeast Region</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>MaterialNumber</FieldName>
        <FieldValue>SKU-DRY-78432</FieldValue>
        <FieldDescription>Organic Whole Milk, 1 Gallon</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>Quantity</FieldName>
        <FieldValue>500</FieldValue>
        <FieldDescription>Requested quantity in cases</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>UnitOfMeasure</FieldName>
        <FieldValue>CS</FieldValue>
        <FieldDescription>Case</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>DeliveryDate</FieldName>
        <FieldValue>2026-02-18</FieldValue>
        <FieldDescription>Requested delivery date (within 7-day perishable lead time)</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>Plant</FieldName>
        <FieldValue>SE-DC</FieldValue>
        <FieldDescription>Southeast Distribution Center (Atlanta, GA)</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>StorageLocation</FieldName>
        <FieldValue>Zone-R</FieldValue>
        <FieldDescription>Refrigerated Zone (38°F temperature maintained)</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>CostCenter</FieldName>
        <FieldValue>CC-SEDC-4200</FieldValue>
        <FieldDescription>SE DC Operations - Perishables</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>LotBatchNumber</FieldName>
        <FieldValue>LOT-2026-0215-MK</FieldValue>
        <FieldDescription>Lot/Batch tracking for perishable item (SE DC mandatory, field name CHARG)</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>GLAccount</FieldName>
        <FieldValue>510200</FieldValue>
        <FieldDescription>Inventory - Refrigerated Goods</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>EstimatedPrice</FieldName>
        <FieldValue>48.00</FieldValue>
        <FieldDescription>Per-case estimated price</FieldDescription>
      </DataRow>
      <DataRow>
        <FieldName>PRTotal</FieldName>
        <FieldValue>24000.00</FieldValue>
        <FieldDescription>Total PR amount (500 cases × $48.00)</FieldDescription>
      </DataRow>
    </DataSet>
  </TestData>

  <Annotations>
    <Annotation>
      <Type>SEDC_SPECIFIC_CONSTRAINT</Type>
      <Step>STEP_007</Step>
      <Description>SE DC restricted to regional (R-SE) or national (R-NAT) supplier programs. Enterprise default allows any valid purchasing group. This is a site-level override ensuring compliance with regional supplier agreements and GlobalMart procurement policy.</Description>
    </Annotation>
    <Annotation>
      <Type>SEDC_SPECIFIC_CONSTRAINT</Type>
      <Step>STEP_017</Step>
      <Description>Lot/batch tracking is mandatory at SE DC for all perishable category items. Enterprise default is optional. Required for food safety traceability per GlobalMart cold chain policy. Technical field name: CHARG. Format: LOT-YYYY-MMDD-XX where XX identifies the milk processing facility.</Description>
    </Annotation>
    <Annotation>
      <Type>APPROVAL_ROUTING</Type>
      <Description>PR total of $24,000 is under the SE DC $25K threshold for 3-tier approval. Standard 2-tier approval applies (Category Manager + Procurement Lead). Amounts greater than $25K for perishables require VP Supply Chain sign-off. This PR qualifies for expedited 2-tier chain due to 7-day perishable lead time requirement.</Description>
    </Annotation>
  </Annotations>
</TestScript>
